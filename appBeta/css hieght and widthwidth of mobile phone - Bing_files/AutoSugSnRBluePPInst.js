_w.Bing=_w.Bing||{},Bing.AS={},Bing.AS.EventIds={TextChanged:1,SelectPrevItem:2,SelectNextItem:3,UpdateText:4,NavigateSerp:7,ReadyToProcessEvents:8,SelectLeftItem:9,SelectRightItem:10,NavigateLink:11,EnterKeyPressed:12,EscKeyPressed:13,CloseFlyout:15,MouseEnterSuggestion:16,MouseLeaveSuggestion:17,LastSharedEventId:99,ConfigurationSet:100,Initialized:101,RequestSent:102,ApiCallback:103,ApiServiceReceived:104,ValidResponseReceived:105,SuggestionsRendered:106,NoResults:107,InvalidQuery:108,BeforeNavigate:109,UpdateTextAndRequery:110,QueryChanged:111,InstSubmit:112,GhostedSuggestion:113,GhostingSubmit:114,DropDownShown:115,DropDownHidden:116},Bing.AS.Constants={KeyCodeBackspace:8,KeyCodeTab:9,KeyCodeEnter:13,KeyCodeEscape:27,KeyCodeSpace:32,KeyCodeArrowLeft:37,KeyCodeArrowUp:38,KeyCodeArrowRight:39,KeyCodeArrowDown:40,KeyCodeDelete:46,KeyCodeImeOpen:229,HitHighlightStartToken:"<strong>",HitHighlightEndToken:"<\/strong>",SuggestionsDataProvider:1,PreviewPaneDataProvider:2},Bing.AS.AutoSuggest=function(){function p(t,i,r){if(t.readyState==4){if(t.onreadystatechange=function(){},n.raiseEvent(Bing.AS.EventIds.ApiCallback),r!=n.currentQuery)return;if(t.status==200){if(t.responseText=="NoResults"){n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults);return}n.raiseEvent(Bing.AS.EventIds.ValidResponseReceived,r,{},i),e=r,n.canvas.render(t.responseText,n.currentQuery,i),h=!0}else n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults)}}function c(n){return i.asf&&!n?w:y}function l(t,r,u){u=u||n.canvas.selectedSuggestion;switch(t){case"sc":return n.canvas.currentSuggestionList.length+"-"+e.length;case"pq":return r?encodeURIComponent(n.currentQuery):n.currentQuery;case"sp":return u?u.ord+1:-1;case"qs":return u?u.src:"n";case"sk":return u&&u.sk?u.sk:"";case"skc":var f=null;return u&&u.qsc&&(f=u.skc?u.skc:""),f;case"qsc":return u&&u.qsc?u.qsc:null;case"ghc":return n.ghostInstValue>0?n.ghostInstValue:null;case"cvid":return i.asf?_G.IG:null}}function v(t,i){var c=[],v=t["0"].Type.toString(),y=s[v],o,h,l,u,f;for(r.appendHistory(i,t,y),h=0;h<t.length;h++){if(o=t[h],l=o.Type,u=o.Suggests,!a[l]){for(f=0;f<u.length;f++)u[f].ServiceType=l,n.lastSuggestionType=u[f].Type;c=c.concat(u)}n.raiseEvent(Bing.AS.EventIds.ApiServiceReceived,o)}e=i,n.canvas.render(c,n.currentQuery)}var n=this,f;n.config=null,n.currentQuery="",n.apiOptions="",n.baseQuery="",n.canvas=null,n.logMeta="",n.popularNowEnabled=!1,n.lastSuggestionType,n.data={};var y=["pq","sc","sp","qs","sk","skc","qsc","ghc","cvid"],w=["ghc"],i,o=0,s={},a={QR:1,NW:0},e="",r,u=Bing.AS.EtwEventLogger,t,h=!1;for(n.init=function(u,f,e){var c,h,l,a,v,o;if(n.config=i=u,n.baseQuery=e,u.p0)for(c=u.p0.split(","),h=0;h<c.length;h++)l=h.toString(),a=c[l].toString(),s[a]=1;t=new Bing.AS.DataProvider(u,Bing.AS.Constants.SuggestionsDataProvider,p),n.popularNowEnabled=u.ePN,u.eLO&&n.addApiOption("l"),u.eAN&&(v=u.as||"a",n.addApiOption(v)),r=new Bing.AS.History(u),r.init(),n.canvas=new Bing.AS.Canvas(u,f),o=new Bing.AS.EventRegistration,o.add(Bing.AS.EventIds.SuggestionsRendered,function(t,i,f,e,o){n.raiseEvent(Bing.AS.EventIds.SuggestionsRendered,t,i,f,e,o),u.asf&&r.setQueryWithoutHistory(t,i)}),o.add(Bing.AS.EventIds.UpdateText,function(t,i){n.raiseEvent(Bing.AS.EventIds.UpdateText,t,i)}),o.add(Bing.AS.EventIds.NavigateSerp,function(t,i){n.raiseEvent(Bing.AS.EventIds.NavigateSerp,t,i)}),o.add(Bing.AS.EventIds.NavigateLink,function(t,i,r,u,f,e){n.raiseEvent(Bing.AS.EventIds.NavigateLink,t,i,r,u,f,e)}),o.add(Bing.AS.EventIds.NoItemSelected,function(){n.raiseEvent(Bing.AS.EventIds.NoItemSelected)}),o.add(Bing.AS.EventIds.MouseEnterSuggestion,function(t){n.raiseEvent(Bing.AS.EventIds.MouseEnterSuggestion,t)}),o.add(Bing.AS.EventIds.MouseLeaveSuggestion,function(t){n.raiseEvent(Bing.AS.EventIds.MouseLeaveSuggestion,t)}),o.add(Bing.AS.EventIds.NoResults,function(){n.raiseEvent(Bing.AS.EventIds.NoResults)}),n.canvas.EventRegistry.push(o),n.raiseEvent(Bing.AS.EventIds.Initialized,this)},n.addApiOption=function(n){t.addApiOption(n)},n.apiCB=function(t){n.raiseEvent(Bing.AS.EventIds.ApiCallback);var i="",r=[],e,f=t.AS;u&&u.log(n,"ApiResponseReceived");try{if(i=f.Query,e=f.FullResults==1,r=f.Results,n.logMeta=f.LogMeta,n.currentQuery!=""&&i!=n.currentQuery)return;if(!r){n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults);return}}catch(o){return}n.raiseEvent(Bing.AS.EventIds.ValidResponseReceived,i,r),v(r,i)},n.setData=function(t){n.data=t},n.enabledPopularNow=function(t){n.popularNowEnabled=t},n.reset=function(){r.reset()},n.getAllSuggestionInstUrl=function(n,t){for(var r=c(t),u=[],f,i=0;i<r.length;i++)f=l(r[i],!0,n),f!==null&&(u=u.concat(["&",r[i],"=",f]));return u.join("")},n.getAllSuggestionInstObject=function(n,t){for(var r=c(t),f={},u,i=0;i<r.length;i++)u=l(r[i],!1,n),u!==null&&(f[r[i]]=u);return f},n.setCursorPosition=function(n){o=n},n.setDataSet=function(n){this.config.ds=n},n.fetch=function(f){t.addParam("cp",o),i.h&&n.currentQuery!=""&&t.addApiOptionN("h"),n.popularNowEnabled&&t.addApiOptionN("p"),r.setDataProviderCallParams(n.currentQuery,t),n.baseQuery!=""&&t.addParam("bq",encodeURIComponent(n.baseQuery)),i.ds&&t.addParam("ds",i.ds),i.cnt&&i.cnt>0&&t.addParam("count",i.cnt),i.asf&&i.io&&!h&&t.addParam("css",1);var e=t.fetch(f);u&&u.log(n,"ApiRequestSent"),n.raiseEvent(Bing.AS.EventIds.RequestSent,n.currentQuery,e)},f=0;f<Bing.AS.AutoSuggest.ScopeExtensions.length;f++)Bing.AS.AutoSuggest.ScopeExtensions[f].init.apply(this)},Bing.AS.AutoSuggest.ScopeExtensions=[],Bing.AS.AutoSuggest.prototype.EventRegistry=[],Bing.AS.AutoSuggest.prototype.InstrumentationTypes=[],Bing.AS.AutoSuggest.prototype.setQuery=function(n){var t=this.config.eHS||this.popularNowEnabled?0:1;n.length>=t?(this.currentQuery=n,this.fetch(n)):this.raiseEvent(Bing.AS.EventIds.InvalidQuery)},Bing.AS.EventRegistration=function(){this.events=[],this.add=function(n,t){this.events[n]=t}},Bing.AS.AutoSuggest.prototype.raiseEvent=function(n){for(var r=arguments.length?[].slice.apply(arguments).slice(1):[],i,t=0;t<this.EventRegistry.length;t++)i=this.EventRegistry[t],i.events[n]&&i.events[n].apply(this,r)},Bing.AS.DataProvider=function(n,t,i){function c(t){var i=t,r,e;n.asf&&n.ds&&(r="/AS/Suggestions",i=i.replace(r,r+"/"+n.ds));for(e in f)i+="&"+e+"="+f[e];return f={},u=[],i}function w(n){h.push(n)}function b(n){u.push(n)}function r(n,t){f[n]=t}function k(n,t){var i=t?u:h.concat(u);r("q",encodeURIComponent(n)),r("o",i.join("+")),Bing.AS.Utils.LoadScript(c(a))}function y(n){var t=[].slice.call(arguments);return r("cvid",_G.IG),t.unshift(c(v+encodeURIComponent(n))),l.apply(_w,t)}function l(n){var t=sj_gx(),r;return o++,r=[].slice.apply(arguments).slice(1),r.unshift(o),r.unshift(t),t.open("GET",n,!0),t.onreadystatechange=function(){i.apply(_w,r)},t.withCredentials!==undefined&&(t.withCredentials=!0),t.send(),o}var g=this,e=Bing.AS.Constants.PreviewPaneDataProvider,d=t==e?".apiECB":".apiCB",s=decodeURIComponent(n.u),a=[s,"&mkt=",n.mkt,"&type=cb&cb=",n.globalId,d].join(""),v=t==e?n.ppu:s,h=[],f={},u=[],o=0,p=n.asf||t==e&&n.ash;return{addApiOption:w,addApiOptionN:b,addParam:r,fetch:p?y:k,fetchUrl:l}},Bing.AS.History=function(n){function e(){return n.eHS&&sj_cook.get(o,s)!="0"}function a(n){var r=e();return(r!=f&&t.reset(),f=r,!r)?!1:i?n.indexOf(i)!=0:!0}var t=this;t.config=n;var o="_UR",s="OMW",h="_SS",c="SID",l=n.m,f=e(),i=null,v=0,r,u={};n.maxHS!=null&&n.maxHS>0&&(u["hs.count"]=n.maxHS),n.vid&&(u["hs.ds"]=n.vid),t.setDataProviderCallParams=function(t,i){if(r||(r=sj_cook.get(h,c)),a(t)&&r){for(var f in u)i.addParam(f,u[f]);n.asf?i.addParam("o","hs"):(i.addParam("sid",r),i.addParam("qt",sb_gt()),i.addApiOptionN("hs"))}},t.appendHistory=function(n,r,u){var h=0,e=0,o=t.getHistory(n,r,l),s={Type:"HS",Suggests:o},f;if(e=o.length,e){for(f=0;f<e;f++)s.Suggests[f].isHist=!0;r.splice(u?1:0,1,s)}else i=n},t.setQueryWithoutHistory=function(n,t){for(var u=!1,r=0;r<t.length;r++)if(t[r].stype&&t[r].stype=="HS"){u=!0;break}u||(i=n)},t.reset=function(){i=null}},Bing.AS.History.prototype.init=function(){},Bing.AS.History.prototype.getHistory=function(n,t){for(var i=0;i<t.length;i++)if(t[i].Type=="HS")return t[i].Suggests;return[]},Bing.AS.Utils=new function(){function e(n,t){if(n===t)return!1;while(t&&t!==n)t=t.parentNode;return t===n}var i=new RegExp(Bing.AS.Constants.HitHighlightStartToken,"gi"),r=new RegExp(Bing.AS.Constants.HitHighlightEndToken,"gi"),u=0,n,t=[],f=5;this.StripHighlighting=function(n){return n.replace(i,"").replace(r,"")},this.SetInnerText=function(n,t){if(n&&typeof t=="string"){var i="textContent";n[n[i]!==undefined?i:"innerText"]=t}},this.GetComputedStyle=function(n){return _w.getComputedStyle?_w.getComputedStyle(n,null):n.currentStyle},this.GetQueryStringParam=function(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)"),i=n.match(r);return i?i[1]:null},this.LoadScript=function(i){n=n||_d.getElementsByTagName("head")[0];var r=sj_ce("script");n.appendChild(r),r.src=i,t.push(r),t.length>=f&&n.removeChild(t.shift())},this.SetSelectionRange=function(n,t,i){if(n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.moveEnd("sentence",-1e5),r.moveStart("character",t),r.moveEnd("character",i-t),r.select()}},this.TruncateText=function(n,t){return n.length>t&&(n=n.substr(0,t-3),n=n.replace(/\s+$/g,"")+"..."),n},this.GetMouseCoords=function(n){return n=sj_ev(n),{x:n.clientX,y:n.clientY}},this.RewriteAttribsToProps=function(n,t){for(var i,r,u=0;i=t[u++];)r=n.getAttribute(i),r&&(n[i]=r)},this.MouseEnterLeave=function(n,t){return function(i){i=sj_ev(i);var r=i.relatedTarget||(i.type=="mouseout"?i.toElement:i.fromElement);t===r||e(t,r)||n.call(t,i)}},this.getCursorPosition=function(n,t){var i=0,e=_d.selection,o=n.selectionStart,r,u,f;return o!=null?i=o:e&&n.createTextRange&&(t&&n.focus(),r=n.createTextRange(),u=r.duplicate(),f=e.createRange(),t&&r.moveToBookmark(f.getBookmark()),u.setEndPoint("EndToStart",f),i=u.text.length),i},this.InsertAjaxResponseIntoDom=function(n,t,i){var s,a,e,o,v,y,d,r,l,p;if(t){var k="innerHTML",g="script",h="appendChild",c="length",w="src",b="type",f=sj_ce("div");for(f[k]="<br>"+t,s=f.childNodes,f.removeChild(s[0]),a=f.getElementsByTagName(g),r=0;r<a[c];r++)e=sj_ce(g),o=a[r],e[b]=o[b],v=o.getAttribute(w),v?e.setAttribute(w,v):e.text=o[k],f.replaceChild(e,o);if(i)for(y=f.getElementsByTagName("style"),d=_d.getElementsByTagName("head")[0],r=0;r<y[c];r++)l=y[r],l.setAttribute("id","ascss"+u++),d[h](l);for(p=_d.createDocumentFragment();s[c];)p[h](s[0]);n[h](p)}},this.RemoveClassName=function(n,t){n&&(n.className=n.className.replace(t,""))}},Bing.AS.Canvas=function(n,t){function it(n){u=u||c.GetMouseCoords(n)}function tt(n,t){var r=c.GetMouseCoords(n);u&&(u.x!=r.x||u.y!=r.y)&&(u=r,t.className.indexOf(g)==-1&&(i.highlightSuggestion(t),i.raiseEvent(Bing.AS.EventIds.MouseEnterSuggestion,t)))}function vt(n,t,r){for(var f=[],u=0,e,o=n.split(Bing.AS.Constants.HitHighlightStartToken),u=0;u<o.length;u++)f=f.concat(o[u].split(Bing.AS.Constants.HitHighlightEndToken));for(u=0;u<f.length;u++)f[u]&&(e=u%2==0?i.buildSuggestionSegment(f[u],r?"span":0,r):i.buildSuggestionSegment(f[u],"strong",r),t.appendChild(e))}function ct(n,t){var e=n.Type,u=i.SuggestionGroupBuilders[e],f,r;return u?u.call(i,n,t):(f=i.SuggestionBuilders[n.Type]||i.buildSuggestion,r=sj_ce("li"),i.decorateSuggestion(r,n,t),r=f.call(i,n,r),!r)?!1:(n.SelectTxt||(n.SelectTxt=n.DisplayTxt),i.appendSuggestion(r,n),r)}function ht(){for(var f=i.suggestionsContainer.childNodes,t,r,u,n=0;n<f.length;n++)if(t=f[n],t.overflowElems)for(r=0;r<t.overflowElems.length;r++)u=t.overflowElems[r],u.offsetLeft+u.offsetWidth>i.suggestionsContainer.offsetWidth&&(u.style.display="none")}function st(n,t){var i;return n?(i=n.getAttribute("nav"))?t==e.right&&n.panel&&!n.panel.visible?void 0:i.split(";")[t]:void 0:v[t]}function ot(n){if(sb_ie&&typeof sb_de.style.opacity=="undefined"&&_d.selection){var t=_d.selection.createRange();t.moveStart("character",-n.value.length),n.selectionStart=t.text.length}}function s(t){var e,o;(e=st(r,t))&&(o=_ge(e))&&(e==n.i?(f(),i.unHighlightSuggestionHandler(),i.raiseEvent(Bing.AS.EventIds.NoItemSelected)):(f(o),i.highlightSuggestion(o)))}function at(){return ot(a),a.selectionStart==a.value.length}function l(n){for(var t=i.currentSuggestion;t=t[n];)if(!t.hd)return t;return null}function nt(n){n=sj_ev(n),sj_sp(n)}function ft(){return n.hn?"http://"+n.hn:""}function b(n){ut.test(n.className)||(n.className+=" "+g)}function d(n){c.RemoveClassName(n,ut)}function f(n){if(i.selectedSuggestion=n,!n||n.supressTextOnSelect||n.nt)i.raiseEvent(Bing.AS.EventIds.UpdateText,k,!0);else{var t=n.query||i.currentSuggestionList[n.ord];!t&&n.panel&&(t=n.panel.suggestion.query),i.raiseEvent(Bing.AS.EventIds.UpdateText,t,n.isPPElem)}}function lt(t,i){return n.anc?null:(i.className=this.SuggestionClassName+" sa_2RowImg "+this.SuggestionClassName+t.Type,this.buildSuggestionImage(t,i),this.buildSuggestionTerm(t,i),this.buildSuggestionDescription(t,i),this.addSuggestionUrl(t,i),i.supressTextOnSelect=!0,i)}var i=this,p,o,y,h;i.config=n,i.container=t,i.currentRenderIndex=0,i.currentSuggestion,i.currentSuggestionList=[],i.selectedSuggestion,i.clickedSuggestion,i.suggestionTypesRendered,i.suggestionsContainer=t,i.SuggestionClassName="sa_sg";var g="sa_hv",ut=/(\s|^)sa_hv/g,w="sa_tm",c=Bing.AS.Utils,rt=c.MouseEnterLeave,e={up:0,right:1,down:2,left:3},k,et=n.m||5,u,a=_ge(n.i),v=[],r;for(i.render=function(f,o,s){var l=0,y=[],h,w,a,c,b,d,p;if(t.innerHTML="",k=o,i.currentSuggestionList=[],i.currentSuggestion=null,i.selectedSuggestion=null,r=null,u=null,i.currentRenderIndex=0,i.suggestionTypesRendered={},typeof f=="string"){if(Bing.AS.Utils.InsertAjaxResponseIntoDom(t,f,n.io),i.suggestionsContainer=_ge(n.slid),i.suggestionsContainer)for(h=i.suggestionsContainer.firstChild;h;){if(h.className.indexOf("sa_hd")!=-1){h.hd=!0,h=h.nextSibling;continue}i.currentSuggestionList.length==0&&(v[e.down]=h.id),h.addInst=!0,Bing.AS.Utils.RewriteAttribsToProps(h,["url","query","stype","hc","nt"]),i.currentSuggestionList.push(h.query),i.decorateSuggestion(h,{},l++),v[e.up]=h.id,y.push(h),h=h.nextSibling}else{i.raiseEvent(Bing.AS.EventIds.NoResults);return}f={}}else for(d=Math.min(f.length,et);l<d;l++){if(c=f[l],!c)break;c.DisplayTxt=c.Txt,a=c.ServiceType,a!=b&&i.HeadingBuilders[a]&&(w=i.HeadingBuilders[a].call(i))&&i.addHeading(w,l==0),i.suggestionTypesRendered[c.Type]==null&&(i.suggestionTypesRendered[c.Type]=0),p=ct(c,i.currentRenderIndex),p&&(b=a,i.suggestionTypesRendered[c.Type]++,i.currentRenderIndex++,y.push(p))}i.raiseEvent(Bing.AS.EventIds.SuggestionsRendered,o,y,f,s,t),sb_st(ht,1)},i.appendSuggestion=function(n,t){var r=Bing.AS.Utils.StripHighlighting(t.SelectTxt);n.query=r,i.suggestionsContainer.appendChild(n),i.currentSuggestionList.push(r)},i.decorateSuggestion=function(n,t,r){n.src=n.stype||t.Type,n.ord=r,n.sk=t.Sk,i.attachSuggestionEvents(n)},i.attachSuggestionEvents=function(t){if(sj_be(t,"mousemove",function(n){it(n),tt(n,t)}),sj_be(t,"mouseover",rt(function(n){it(n),tt(n,t)},t)),sj_be(t,"mouseout",rt(function(){if(t==r){var u=t.isPPElem?t.panel.suggestion:null;t.isPPElem&&i.unHighlightSuggestionHandler(t),r=u||r}i.raiseEvent(Bing.AS.EventIds.MouseLeaveSuggestion,t)},t)),sj_be(t,"mousedown",function(n){i.onMouseDownSuggestion(n,t)}),sj_be(t,"mouseup",function(n){nt(n);i.onMouseUpSuggestion(n,t)}),n.asf){var f=window.navigator.msPointerEnabled?"onMSPointerDown":"ontouchstart";f.toLowerCase()in _w&&sj_be(t,f.substr(2),function(n){if(u={x:0,y:0},t.it="m",n.pointerType)switch(n.pointerType){case n.MSPOINTER_TYPE_TOUCH:t.it="t";break;case n.MSPOINTER_TYPE_PEN:t.it="p"}else t.it="t"})}},i.buildSuggestionTerm=function(n,t,i){var u=w,r;n.isHist&&(u+=" "+w+"HS"),r=sj_ce(i||"div","",u),n.Type=="ID"&&(r.lang="en"),t.appendChild(r),vt(n.DisplayTxt,r)},i.buildSuggestionDescription=function(n,t,r){n.Meta1&&t.appendChild(i.buildSuggestionSegment(n.Meta1,r||"div","sa_ds"))},i.buildSuggestionImage=function(n,t,i){if(n.Img){var u=sj_ce(i||"div","","sa_img"),r=sj_ce("img"),f=n.Img.alt;f&&(r.title=f),r.src=ft()+n.Img.src,r.width=n.Img.w,r.height=n.Img.h,u.appendChild(r),t.appendChild(u)}},i.addSuggestionUrl=function(t,i){t.Url&&(i.url=ft()+t.Url+(n.fc?"&FORM="+n.fc:""),i.addInst=!0)},i.buildSuggestionSegment=function(n,t,i){var r=t?sj_ce(t,"",i):_d.createTextNode(n);return t&&Bing.AS.Utils.SetInnerText(r,n),r},i.handleArrowUpKey=function(t){if(n.asf)s(e.up,t),i.currentSuggestion&&i.raiseEvent(Bing.AS.EventIds.SelectPrevItem,i.currentSuggestion);else{var r=i.suggestionsContainer.lastChild;if(i.currentSuggestion&&!(r=l("previousSibling"))){f(),i.unHighlightSuggestionHandler(),i.raiseEvent(Bing.AS.EventIds.NoItemSelected);return}f(r),i.highlightSuggestion(r)}},i.handleArrowDownKey=function(t){if(n.asf)s(e.down,t),i.currentSuggestion&&i.raiseEvent(Bing.AS.EventIds.SelectNextItem,i.currentSuggestion);else{var r;if(!(i.currentSuggestion&&(r=l("nextSibling")))){if(i.currentSuggestion){f(),i.unHighlightSuggestionHandler(),i.raiseEvent(Bing.AS.EventIds.NoItemSelected);return}r=i.currentSuggestion=i.suggestionsContainer.firstChild,r.hd&&(r=l("nextSibling"))}f(r),i.highlightSuggestion(r)}},i.handleArrowRightKey=function(t){n.asf&&at()&&(s(e.right,t),r&&r.isPPElem&&sj_pd(t))},i.handleArrowLeftKey=function(t){n.asf&&(r&&r.isPPElem&&sj_pd(t),s(e.left,t))},i.highlightSuggestion=function(n){i.unHighlightSuggestionHandler(n),i.currentSuggestion=n.isPPElem?n.panel.suggestion:n,b(i.currentSuggestion),i.currentSuggestion!=n&&b(n),r=n},i.unHighlightSuggestionHandler=function(n){r&&(n&&n.isPPElem&&n.panel.suggestion==i.currentSuggestion||(d(i.currentSuggestion),i.currentSuggestion=null),(r.isPPElem||!i.currentSuggestion)&&d(r),r=null)},i.onMouseDownSuggestion=function(n,t){n=sj_ev(n);var r=n.button;r==2?(nt(n),sj_pd(n)):i.clickedSuggestion=t},i.onMouseUpSuggestion=function(n,t){n=sj_ev(n),t.isPPElem&&n.button!=2&&(i.clickedSuggestion=t),i.clickedSuggestion&&i.clickedSuggestion==t&&(f(i.clickedSuggestion),t.url?i.raiseEvent(Bing.AS.EventIds.NavigateLink,t.url,t.addInst,t.redir,t.query,!1,t.nt):i.raiseEvent(Bing.AS.EventIds.NavigateSerp,t.query),i.clickedSuggestion=null)},p=["DT","IG","MV","SA","SI","SN","SP","SR","TC","TR","WE","WH","WM","WU","ID"],o=0;o<p.length;o++)y=p[o],this.SuggestionBuilders[y]=lt,Bing.AS.AutoSuggest.prototype.InstrumentationTypes.push(y);for(h=0;h<Bing.AS.Canvas.ScopeExtensions.length;h++)Bing.AS.Canvas.ScopeExtensions[h].init.apply(this)},Bing.AS.Canvas.ScopeExtensions=[],Bing.AS.Canvas.prototype.HeadingBuilders={},Bing.AS.Canvas.prototype.SuggestionBuilders={},Bing.AS.Canvas.prototype.SuggestionGroupBuilders={},Bing.AS.Canvas.prototype.buildSuggestion=function(n,t){return t.className=this.SuggestionClassName+(this.suggestionsContainer.childNodes.length==0?" sa_sg_first ":" ")+this.SuggestionClassName+n.Type,this.buildSuggestionTerm(n,t),this.addSuggestionUrl(n,t),t.hc=n.HC,t.hcs=n.HCS,t},Bing.AS.Canvas.prototype.addHeading=function(n,t){var i=sj_ce("li","","sa_hd"+(t?"_first":""));i.hd=!0,i.innerHTML=n,this.suggestionsContainer.appendChild(i)},Bing.AS.Canvas.prototype.HeadingBuilders.PN=function(){return this.config.ePN?sa_loc.H_PN:null},Bing.AS.Canvas.prototype.HeadingBuilders.AS=function(){return this.config.eWH?sa_loc.H_AS:null},Bing.AS.Canvas.prototype.EventRegistry=[],Bing.AS.Canvas.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent,Bing.AS.Layout=function(n,t){function o(n,t){n.appendChild(t)}var r=this,e=n.asf,s=Bing.AS.Utils.GetComputedStyle(sj_b).direction=="rtl",u=sj_ce("div","","sa_as"),f;o(t,u),e||(f=sj_ce("ul","sa_ul","sa_drw"),o(u,f)),r.getSuggestionsContainer=function(){return e?_ge(n.slid):f},r.getSuggestionsDrawer=function(){return u},r.show=function(){u.style.display="block"},r.hide=function(){u.style.display="none"},r.update=function(){var r,i,n=Bing.AS.Utils.GetComputedStyle(t.parentNode);s?(r=parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft),i=(parseFloat(n.paddingRight)+parseFloat(n.borderRightWidth))*-1):(r=(parseFloat(n.paddingLeft)+parseFloat(n.borderLeftWidth))*-1,i=parseFloat(n.borderRightWidth)-parseFloat(n.paddingRight)),t.style.marginLeft=r+"px",t.style.marginRight=i+"px"}},Bing.AS.Layout.prototype.EventRegistry=[],Bing.AS.Layout.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent,Bing.AS.Layout.prototype.getLeft=function(){return 0},Bing.AS.Layout.prototype.getWidth=function(){return 0},Bing.AS.SearchForm=function(n){function g(n){return typeof n=="number"?n:'"'+n.replace(/"/g,'\\"')+'"'}function c(u,f,e){var c,l,v,y,a,p,o,h;if(n.sbt){for(;v=k.shift();)t.searchForm.removeChild(v);k=[]}for(f&&t.raiseEvent(Bing.AS.EventIds.GhostingSubmit),s=r.getAllSuggestionInstObject(null,f),t.raiseEvent(Bing.AS.EventIds.BeforeNavigate),e=e||{},y=0,p=[s,e];a=p[y++];)for(o in a)c=_ge("sa_"+o),l=a[o],c?c.value=l:t.addHiddenField(o,l);at?at(i,s):(f||sj_evt.fire("onSearch",t.searchForm),t.fireEvt&&!f&&(sj_ue(t.searchForm,"submit",b),t.fireEvt(t.searchForm,"submit"),sj_be(t.searchForm,"submit",b)),d(),t.searchForm.submit()),t.fireEvt&&(t.autosuggest.canvas.selectedSuggestion=null,t.autosuggest.ghostInstValue=0,h=_ge("sa_ghc"),!s.ghc&&h&&h.parentNode.removeChild(h))}function d(){var r,i;st&&n.eUG||(r=t.searchForm.getAttributeNode("onsubmit"),r&&_w.si_T&&(i=r.value.match(/si_T\('(.*)'\)/),i&&i[1]&&si_T(i[1])),st=!0)}function rt(u,e,o,s,h,l){var v,a;if(sb_st(f,5),s==undefined||l||(i.value=s),o)sj_cook.set("SCRHDN","ASD","1"),sj_cook.set("SCRHDN","DURL",u),c(s,h);else{if(r.config.asf){if(n.sbt){v=function(n){var t,u=/\+/g,f=/([^&=]+)=?([^&]*)/g,r=function(n){return decodeURIComponent(n.replace(u," "))},e=n.substring(n.indexOf("?")+1),i;for(urlParams={};t=f.exec(e);)i=r(t[1]),i!=="q"&&(urlParams[i]=r(t[2]));return urlParams},c(s,h,v(u));return}n.eUG?d():t.searchForm.onsubmit&&t.searchForm.onsubmit()}a=u+(e?r.getAllSuggestionInstUrl():""),l?_w.open(a,"_blank"):typeof sj_lc!="undefined"?sj_lc(a):_w.location=a}}function b(n){var i,u;sb_st(f,5),t.cdh(n),i=r.canvas.selectedSuggestion,i?(r.config.asf&&_w.sa_si_T(i.getAttribute("id")),u=i.query,i.url?rt(i.url,i.addInst,i.redir,u,!0,i.nt):c(u,!0)):c(r.currentQuery,!0)}function dt(n){t.cancelKeyEvent(n)||it(n)}function it(n){var i=n.keyCode;switch(i){case e.KeyCodeEscape:t.config.eAI?(u&&(h(n),sj_sp(n)),sj_pd(n)):(f(),t.cdh(n));break;case e.KeyCodeArrowUp:u&&(r.canvas.handleArrowUpKey(n),t.cdh(n));break;case e.KeyCodeArrowDown:u?r.canvas.handleArrowDownKey(n):nt();break;case e.KeyCodeArrowRight:u&&r.canvas.handleArrowRightKey(n);break;case e.KeyCodeArrowLeft:u&&r.canvas.handleArrowLeftKey(n);break;case e.KeyCodeTab:t.config.asf&&t.fireEvt&&h(n)}}function gt(n){var i=n.keyCode;v||t.cancelKeyEvent(n)||(i==e.KeyCodeArrowUp||i==e.KeyCodeArrowDown||i==e.KeyCodeEscape)&&t.handleUpDownEscOnKeyUp(n)&&it(n)}function tt(){u?t.shouldHidePanel()&&f():nt()}function nt(){(a&&sb_ct(a),v)||(t.lastQuery=null,ht())}function ui(){o.update(),u||(sj_evt.fire("focusChange",i),o.show(),u=!0,t.raiseEvent(Bing.AS.EventIds.DropDownShown),sb_i6&&sj_evt.fire("autosuggestShown",i),sj_evt.fire("onPopTR"))}function h(i){n.asf&&sj_et(i)!=t.searchBox&&Bing.AS.Utils.RemoveClassName(ri,"b_focus"),f()}function f(){u&&(o.hide(),ni=u=!1,t.lastQuery=l(),t.raiseEvent(Bing.AS.EventIds.DropDownHidden),sb_i6&&sj_evt.fire("autosuggestHide",i))}function bt(n){n[1]!==i&&f()}function wt(){a=sb_st(f,50)}function yt(n){t.updateText(n)}function vt(n){y=!0,i.value=n;var t=n.length;i.focus(),Bing.AS.Utils.SetSelectionRange(i,t,t)}function et(){if(!v){y?ht():(t.lastQuery=l(),y=!0);var n=ct;lt&&(n*=1<<Math.max(0,w-ti+1)/2)}sb_st(et,n)}function ht(){var n=l();if(n.length<kt){f();return}t.lastQuery!=n&&(t.shouldHidePanel()?f():(a&&sb_ct(a),r.setCursorPosition(t.getCursorPosition()),r.setQuery(n),t.lastQuery=n,w++))}function pt(){w--}function l(){return i.value.replace(fi,"").replace(ii," ").toLowerCase()}var t=this,p;t.raiseEvent(Bing.AS.EventIds.ConfigurationSet,n),t.config=n,t.searchForm=null,t.searchBox=null,t.autosuggest=null,t.layout=null,t.lastQuery=null,t.DemoQuery="asdemoq",t.DemoPath="asdemopath";var ft="SRCHHPGUSR",ut="AS",ti=4,ot,r,o,ei,ct=0,lt,w=0,kt=n.eHS||n.ePN?0:1,a,v,ni,u,i,y=!0,e=Bing.AS.Constants,s,ri=_ge("b_header"),k=[],st,fi=new RegExp("^\\s*","g"),ii=new RegExp("\\s+","g"),at=typeof n.cb=="function"?n.cb:null;for(t.init=function(u){var k,y,s,p,d,e,a,w;(t.config.globalId=u,t.config.slid="sa_ul",v=t.isDisabled())||(ot=n.i,t.searchForm=_ge(n.f),i=_ge(ot),t.searchBox=i,n.asf&&n.SBW&&_ge("hp_container")&&(k=_w.innerWidth||sb_de.clientWidth,k<=1024&&(y=_ge(n.c),y&&(y.className+=" sa_n",n.SBW-=30))),t.searchForm.form&&(n.fc=t.searchForm.form.value),sj_cook.set("SCRHDN","ASD","0"),sj_cook.set("SCRHDN","DURL","#"),s=_ge(n.c||"sw_as"),s.style.display="block",t.layout=o=new Bing.AS.Layout(n,s,i.parentNode),t.registerUIElement(s),t.registerUIElement(i),p=_ge("sb_form_go"),p&&t.registerUIElement(p),ct=n.d,lt=n.t,t.lastQuery=l(),d=n.asf?o.getSuggestionsDrawer():o.getSuggestionsContainer(),t.autosuggest=r=new Bing.AS.AutoSuggest,r.init(n,d,t.lastQuery),e=new Bing.AS.EventRegistration,e.add(Bing.AS.EventIds.ApiCallback,pt),e.add(Bing.AS.EventIds.NoResults,wt),e.add(Bing.AS.EventIds.SuggestionsRendered,ui),e.add(Bing.AS.EventIds.UpdateText,yt),e.add(Bing.AS.EventIds.UpdateTextAndRequery,vt),e.add(Bing.AS.EventIds.NavigateSerp,c),e.add(Bing.AS.EventIds.NavigateLink,rt),r.EventRegistry.push(e),a=new Bing.AS.EventRegistration,a.add(Bing.AS.EventIds.SelectPrevItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectPrevItem,n)}),a.add(Bing.AS.EventIds.SelectNextItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectNextItem,n)}),r.canvas.EventRegistry.push(a),sj_be(sj_b,"click",h),sj_be(sj_b,"touchend",h),sj_be(t.searchForm,"submit",b),sj_be(i,"keydown",dt),sj_be(i,"keyup",gt),sj_be(i,"click",tt),t.fireEvt&&sj_be(_w,"blur",h),sj_evt.bind("focusChange",bt),sj_evt.bind("hideDrawer",f),et(),t.raiseEvent(Bing.AS.EventIds.Initialized,t),w=_w.location.search,n.demo&&(Bing.AS.Utils.GetQueryStringParam(w,t.DemoQuery)||Bing.AS.Utils.GetQueryStringParam(w,t.DemoPath))&&(Bing.AS.Utils.LoadScript("/fd/sa/"+_G.Ver+"/AutoSuggest/AutoSuggestDemo.js"),sj_evt.fire("onASDemo",t)))},t.apiCB=function(n){t.autosuggest.apiCB(n)},t.setData=function(n){t.autosuggest.setData(n)},t.isDisabled=function(){return sj_cook.get(ft,ut)==0},t.enable=function(n,i){n&&(t.lastQuery=l()),v=!n,i||sj_cook.set(ft,ut,n?1:0,1,"/")},t.sid=function(t){r.config.sid=n.sid=t},t.registerUIElement=function(n){sj_be(n,"touchend",sj_sp),sj_be(n,"click",sj_sp)},t.addHiddenField=function(i,r){var u=sj_ce("input");return u.id="sa_"+i,u.name=i,u.value=r,u.type="hidden",t.searchForm.appendChild(u),n.sbt&&k.push(u),u},t.drawerIsOpen=function(){return u},t.cp=0,t.cdh=function(n){sj_sp(n),sj_pd(n)},t.setAllSuggestionInstObject=function(n){s=n},t.addToAllSuggestionInstObject=function(n,t){s[n]=t},t.show=tt,t.getCursorPosition=function(){return t.cp=Bing.AS.Utils.getCursorPosition(i,!0)},_w.sa_si_T=function(i){var u=_ge(i.replace("&","")),e,o,f,s;return u&&document.images&&(e=u.getAttribute("h"),f={a:[],add:function(n,t){this.a.push(g(n)+":"+g(t))},get:function(){return this.a.length?"&PR={"+this.a.join(",")+"}":""}},f.add("i",r.canvas.clickedSuggestion?u.it||"m":"k"),u.isPPElem&&f.add("et",sb_gt()-u.panel.ot),o=t.autosuggest.data&&t.autosuggest.data.Inst?t.autosuggest.data.Inst.IG:null,o&&e&&(s=new Image,s.src=_G.gpUrl+"IG="+o+"&"+e+f.get()),n.eUG&&d()),!0},t.updateText=function(n){y=!1,i.value=n},p=0;p<Bing.AS.SearchForm.ScopeExtensions.length;p++)Bing.AS.SearchForm.ScopeExtensions[p].init.apply(t)},Bing.AS.SearchForm.ScopeExtensions=[],Bing.AS.SearchForm.prototype.EventRegistry=[],Bing.AS.SearchForm.prototype.cancelKeyEvent=function(){return!1},Bing.AS.SearchForm.prototype.handleUpDownEscOnKeyUp=function(){return!1},Bing.AS.SearchForm.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent,Bing.AS.SearchForm.prototype.shouldHidePanel=function(){return!1},Bing.AS.SearchForm.ScopeExtensions.push(new function(){this.init=function(){function w(){var r,u;t=o.searchBox,i=Bing.AS.Utils.GetComputedStyle(t),n.style.fontSize=i.fontSize,n.style.fontFamily=i.fontFamily,n.style.position="absolute",t.parentNode.insertBefore(n,t.nextSibling),s=Bing.AS.Utils.GetComputedStyle(t.parentNode),r=new Bing.AS.EventRegistration,r.add(f.ApiServiceReceived,g),r.add(f.SuggestionsRendered,nt),r.add(f.NoResults,a),r.add(f.UpdateText,it),u=o.autosuggest,u.EventRegistry.push(r),u.addApiOption(p)}function e(n){return n.indexOf("px")>0?parseFloat(n):n.indexOf("em")>0?parseFloat(n)*(i.fontSize.indexOf("px")>0?parseInt(i.fontSize):16):0}function k(){return e(i.paddingLeft)+e(i.marginLeft)+e(s.paddingLeft)}function d(n){return e(s.paddingTop)+e(i.marginTop)+n+(t.offsetHeight-n)/2-1}function g(n){r=n.Type==y?n.Suggests:null}function nt(){sb_st(tt,5)}function tt(){var i,u,t,n,f;if(a(),r)for(n=0;n<r.length;n++)i=parseInt(r[n].Meta1),u=parseInt(r[n].Meta2),i!=NaN&&u!=NaN&&v(i,u);if(t=o.autosuggest.data,t&&t.Speller&&t.Speller.Corrections)for(n=0;f=t.Speller.Corrections[n++];)v(f.From,f.To)}function a(){for(var n=0;n<u.length;n++)t.parentNode.removeChild(u[n]);u=[]}function it(){for(var i=o.autosuggest.currentQuery==t.value?"block":"none",n=0;n<u.length;n++)u[n].style.display=i}function v(i,r){var e,o,f;Bing.AS.Utils.SetInnerText(n,t.value.substring(i,r)),l(),e=n.offsetWidth,o=n.offsetHeight,c(),f=sj_ce("div","","sa_spell"),f.style.width=e+"px",f.style.height=b+"px",f.style.left=rt(i)+"px",f.style.top=d(o)+"px",f.style.position="absolute",f.style.background="url(/fd/s/as_spell_underline.png)",t.parentNode.appendChild(f),u.push(f)}function rt(i){Bing.AS.Utils.SetInnerText(n,t.value.substring(0,i)),n.innerHTML=n.innerHTML.replace(ut,"&#160;"),l();var r=n.offsetWidth;return c(),r+k()}function l(){n.style.display="inline"}function c(){n.style.display="none"}var h;if(this.config.spr){var f=Bing.AS.EventIds,b=3,p="qr",y="QR",ut=new RegExp(" ","g"),o=this,t,r,u=[],i,s,n=sj_ce("span");c(),h=new Bing.AS.EventRegistration,h.add(f.Initialized,w),this.EventRegistry.push(h)}}}),Bing.AS.SearchForm.ScopeExtensions.push(new function(){var g=_w.location.search.indexOf("AutoSuggestTestHook_AlwaysGhost=1")>-1,n,c,v,y,t,r,a,s=0,l=0,h=0,b=new RegExp("[-']","g"),o=Bing.AS.Utils.SetSelectionRange,k=1,d=2,p,w=!1,i,e,f,u;Bing.AS.Constants.KeyCodeEnter=13,Bing.AS.Constants.KeyCodePageUp=33,Bing.AS.Constants.KeyCodePageDown=34,Bing.AS.Constants.KeyCodeEnd=35,Bing.AS.Constants.KeyCodeHome=36,Bing.AS.Constants.KeyCodeInsert=45,Bing.AS.Constants.GhostingDelayResponse=0,Bing.AS.Constants.GhostingDelayArrowKey=15,i=Bing.AS.Constants,e=Bing.AS.EventIds,this.init=function(){function wt(i){var r,f,o,s;i.config.eHC&&(u=i.autosuggest,u.ghostInstValue=0,r=new Bing.AS.EventRegistration,r.add(e.SuggestionsRendered,pt),r.add(e.NoItemSelected,at),u.EventRegistry.push(r),u.addApiOption("hc"),n=i.searchBox,rt.add(e.GhostingSubmit,dt),p=n.style.width,rt.add(e.DropDownHidden,kt),f=Bing.AS.Utils.GetComputedStyle(n),v=f.color,y=f.backgroundColor,t=sj_ce("input","sa_ghostbox",n.className+" sa_ghostbox"),t.setAttribute("autocomplete","off"),o=n.getAttribute("type"),o&&t.setAttribute("type",o),i.registerUIElement(t),t.tabIndex=-1,t.style.zIndex=-1,t.style.position="absolute",s=Bing.AS.Utils.GetComputedStyle(n.parentNode),t.style.left=s.paddingLeft,t.style.top=s.paddingTop,sj_be(t,"keydown",ct),sj_be(t,"keyup",lt),sj_be(t,"focus",vt),sj_be(t,"mouseup",st),sj_be(t,"mousedown",ht),sj_be(t,"select",ft),sj_be(t,"selectstart",ft),sj_be(sj_b,"mouseup",ot),sj_be(n,"focus",nt),sj_be(n,"keydown",yt))}function pt(n,t){c=t,!s&&u.currentQuery&&(a=sb_st(et,i.GhostingDelayResponse))}function at(){a=sb_st(et,i.GhostingDelayArrowKey)}function et(){var p,e,h,d,l,a,i,y;if(w||(p=n.parentNode,p.insertBefore(t,p.firstChild),w=!0),a=n.value,i=a.length,f.cp==i&&!s){if(g)e=c[0];else for(y=0;y<c.length;y++)if(h=c[y],d=h.src.toLowerCase(),h.hc){e=h;break}if(!e){tt();return}(r=e.query,l=a.toLowerCase(),r=r.toLowerCase(),r.indexOf(l)==0||(r=r.replace(b,""),r.indexOf(l)==0&&r!=l))&&(n.style.color="transparent",n.style.backgroundColor="transparent",t.style.zIndex=2,t.style.color=v,f.config.SBW&&(t.style.width=f.config.SBW+"px"),t.value=a+r.substring(i),r=t.value,r.substring(i).length==0&&(tt(),nt(),bt()),r!=null&&(o(t,i,r.length),t.focus(),f.raiseEvent(Bing.AS.EventIds.GhostedSuggestion,r,d)),r!=null&&u.ghostInstValue==0&&(u.ghostInstValue=k))}}function kt(){nt(),f.config.SBW&&(t.style.width=p),tt()}function ot(){l&&(ut(),l=0,h=0)}function st(){h&&!l&&(ut(),n.focus())}function ht(){h=1}function ft(){h&&(l=1)}function ct(t){var e=t.keyCode,c,h;if(s=0,e==i.KeyCodeBackspace&&(s=1,r&&f.cdh(t)),(e==i.KeyCodeDelete||e==i.KeyCodeBackspace||t.keyCode==88&&t.ctrlKey)&&tt(),t.altKey||t.ctrlKey||e>i.KeyCodeEnter&&e<i.KeyCodeSpace||e==i.KeyCodeInsert){c=t.ctrlKey&&(e==i.KeyCodeBackspace||e==86),e==i.KeyCodeEscape&&r==null&&sj_evt.fire("hideDrawer",n),(e==i.KeyCodeEscape||e==65&&t.ctrlKey||c)&&(n.focus(),tt(),c&&o(n,n.value.length,n.value.length),f.config.eAI&&sj_sp(t));return}if(e==i.KeyCodeHome||e==i.KeyCodePageUp){t.shiftKey||(it(),o(n,0,0),n.focus());return}if(t.keyCode==i.KeyCodeArrowUp||t.keyCode==i.KeyCodeArrowDown){t.keyCode==i.KeyCodeArrowUp?u.canvas.handleArrowUpKey(t):u.canvas.handleArrowDownKey(t),nt(),tt(),h=n.value.length,o(n,h,h);return}if(r&&e==i.KeyCodeTab?(f.cdh(t),it(1),tt(),nt()):e==i.KeyCodeTab&&sj_evt.fire("hideDrawer",n),r&&e==i.KeyCodeArrowLeft){f.cdh(t),h=n.value.length,it(),o(n,h,h),n.focus(),tt();return}(e==i.KeyCodeEnd||e==i.KeyCodePageDown||e==i.KeyCodeArrowRight)&&(it(1),tt(),nt()),n.focus(),o(n,n.value.length,n.value.length)}function lt(t){if(t.shiftKey&&(t.keyCode==i.KeyCodeHome||t.keyCode==i.KeyCodePageUp||t.keyCode==i.KeyCodeArrowLeft)){var r=n.value.length;it(),nt(),o(n,0,r),n.focus()}}function ut(){var l=t.value,i,c;sb_st(function(){t.value!=l&&u.raiseEvent(e.UpdateTextAndRequery,t.value)},1);var f=_d.selection,s=t.selectionStart,h=t.selectionEnd;f&&t.createTextRange&&(i=t.createTextRange(),c=f.createRange(),s=i.text.length-c.text.length,h=i.text.length),it(),n.focus(),o(n,s,h),nt(),r=null}function vt(){var n=_ge("sw_b");n&&(n.style.borderColor="#3366bb")}function yt(n){s=0,sb_ct(a),nt(),r=null;var t=n.keyCode;(t==i.KeyCodeDelete||t==i.KeyCodeBackspace||t==88&&n.ctrlKey)&&(s=1)}function it(n){r&&(u.raiseEvent(n?e.UpdateTextAndRequery:e.UpdateText,r,!0),u.ghostInstValue=d)}function nt(){n.style.color=v,n.style.backgroundColor=y,t.style.zIndex=-1,t.style.color="transparent"}function bt(){sb_st(function(){n.focus()},1)}function tt(){r=null,t&&t.value&&(t.value="")}function dt(){it(1)}f=this;var rt=new Bing.AS.EventRegistration;rt.add(e.Initialized,wt),this.EventRegistry.push(rt)}}),function(n){n&&(n.prototype.PreviewPaneManager={},n.ScopeExtensions.push(new function(){this.init=function(){var n=new Bing.AS.EventRegistration;n.add(Bing.AS.EventIds.Initialized,function(){Bing.AS.PreviewPaneManager.init(this)}),this.EventRegistry.push(n)}}))}(Bing.AS.SearchForm),Bing.AS.PreviewPaneManager=function(){function bt(){o(v);for(var u=0,r;r=e[u++];)o(r.timeoutTimer);e={},n=""}function wt(n,r){var e=i.layout.getSuggestionsContainer(),f,u;for(e.style.height="",ht.RemoveClassName(e.parentNode,rt),f=0;u=r[f++];)u.ord!==undefined&&(pt(u),t.showForFirst&&u.panel!==undefined&&f==1&&b(u))}function pt(n){var t=f.currentSuggestionList[n.ord];n.getAttribute("hvid")&&k(n,t)}function d(t){var i=e[n];t.panel&&(t.panel==i?i=null:b(t,!0)),n=t.query,i&&y(i,!0)}function b(i,r){var h,u,c;if(i.isPPElem){s(i.panel,r),n=i.panel.suggestion.query;return}o(v),h=n,n=f.currentSuggestionList[i.ord],h!=n&&e[h]!=undefined&&y(e[h],!0),u=i.panel,u&&(u.loaded?s(u,r):(c=i.getAttribute("hvurl"),c&&!it&&(v=a(function(){at(u,n)},t.requestTimeout),yt(n,u,c))))}function yt(n,i,u){i.fetchTimer=a(function(){if(!i.fetching){i.fetching=!0;var f=tt.fetchUrl(u,n,i);r.raiseEvent(r.EventIds.DlRequestSent,i,n,f),i.timeoutTimer=a(function(){kt(i,n,f)},t.requestTimeout)}},20)}function vt(n,t,i,u){n.readyState==4&&(n.onreadystatechange=function(){},u.fetching=!1,o(u.timeoutTimer),n.status==200?(r.raiseEvent(r.EventIds.DlResponseReceived,u,i,t),u.loaded||(u.visible=!1,u.render(n.responseText),r.raiseEvent(r.EventIds.DlResponseRendered,u,i,t),f.currentSuggestion&&f.currentSuggestion.query===i&&(u.loaded?s(u):w(u,i)))):w(u,i))}function at(n,t){w(n,t),n.timeout=!0}function kt(n,t,i){r.raiseEvent(r.EventIds.DlRequestTimeout,n,t,i)}function w(t,i){t&&(t.renderError(),n===i&&s(t))}function k(t,i){var u=new Bing.AS.PreviewPaneManager.PreviewPane(t,rt),l,o,a,c;r.raiseEvent(r.EventIds.PaneCreated,u),e[i]=u,u.obd&&(n=f.currentSuggestionList[t.ord],u.render(),s(u,!0),f.highlightSuggestion(t));n:for(l=0;o=t.childNodes[l++];)if(o.tagName=="DIV"&&o.className.indexOf("sa_s")!=-1&&o.childNodes.length>0)for(a=0;c=o.childNodes[a++];)if(c.tagName=="DIV"&&c.className.indexOf("sa_touch")!=-1){st(c,"mousedown","mouseup","mouseover","mouseout","click"),sj_be(c,"click",function(){h.focus()},!0);break n}return t}function y(n,t){if(o(n.fetchTimer),n.visible&&!n.closing){u=n,n.closing={h:null,cb:null};var i=n.closing.h=a(function(){n.hide(t),n.closing&&n.closing.cb&&n.closing.cb(),p(n)},ct)}}function s(n,t){o(v),t?(u&&(u.hide(!0),p(u)),t&&n.show()):u?n==u?p(u):u.closing.cb=function(){f.currentSuggestion==n.suggestion&&n.show()}:n.show()}function p(n){n.closing&&o(n.closing.h),delete n.closing,u=null}function st(n){for(var t=1;t<arguments.length;t++)dt(n,arguments[t],sj_sp,!0)}function ot(u){var l,o,s;r=Bing.AS.PreviewPaneManager.Events,i=u,h=i.searchBox,c=i.autosuggest,f=c.canvas,l=t.asconfig=c.config,ft=h.style.width,t.showForFirst=l.eSP,t.requestTimeout=l.SCT,it=l.eECT,o=new Bing.AS.EventRegistration,o.add(Bing.AS.EventIds.ValidResponseReceived,bt),o.add(Bing.AS.EventIds.SuggestionsRendered,wt),o.add(Bing.AS.EventIds.MouseEnterSuggestion,b),o.add(Bing.AS.EventIds.NoItemSelected,function(){var t=e[n];t&&y(t,!0),n=""}),c.EventRegistry.push(o),s=new Bing.AS.EventRegistration,s.add(Bing.AS.EventIds.SelectNextItem,d),s.add(Bing.AS.EventIds.SelectPrevItem,d),s.add(Bing.AS.EventIds.DropDownHidden,et),s.add(Bing.AS.EventIds.DropDownShown,lt),i.EventRegistry.push(s),g(t,ut),tt=new Bing.AS.DataProvider(l,Bing.AS.Constants.PreviewPaneDataProvider,vt),nt=!0}function et(){Bing.AS.Utils.RemoveClassName(i.searchForm,l),t.asconfig.SBW&&(h.style.width=ft)}function lt(){t.asconfig.SBW&&(h.style.width=t.asconfig.SBW+"px",i.layout.update()),i.searchForm.className.indexOf(l)===-1&&(i.searchForm.className===""?i.searchForm.className=l:i.searchForm.className+=" "+l)}function g(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}var dt=sj_be,ni=sj_pd,a=sb_st,o=sb_ct,r,ht=Bing.AS.Utils,e={},gt={},c,f,i,n="",rt=/(\s|^)sa_se(\s|$)/g,ut={},nt,v,it=!1,tt,ft,h,l="sa_open",t={asconfig:{},delayFix:50,maxNumOfEntities:5,requestTimeout:500,showForFirst:!1},u,ct=500;return{getSearchForm:function(){return i},changeConfig:function(n){var i=nt?t:ut;g(i,n)},getConfig:function(){return t},init:ot,extendSuggestion:k}}(),Bing.AS.PreviewPaneManager.Events=function(){function t(t){for(var u=arguments.length?[].slice.apply(arguments).slice(1):[],i,r=0;i=n[r++];)i.events[t]&&i.events[t].apply(this,u)}var n=[];return{add:function(t){n.push(t)},raiseEvent:t}}(),Bing.AS.PreviewPaneManager.Events.EventIds={PaneShown:1,PaneHidden:2,PaneCreated:3,PaneRendered:4,ErrorRendered:5,DlRequestSent:6,DlResponseReceived:7,DlRequestTimeout:8},Bing.AS.PreviewPaneManager.PreviewPane=function(){function a(n,t){var f;(this.container=f=_ge(n.getAttribute("hvid")),f)&&(this.manager=Bing.AS.PreviewPaneManager,u=this.manager.getSearchForm(),v=u.autosuggest.canvas,s=u.autosuggest.config,r=s.eECT,h=t,i=u.layout.getSuggestionsContainer(),n.panel=this,u.registerUIElement(f),k(f,"mousedown",function(n){n=sj_ev(n),l(sj_et(n),f)||g(n)},!0),k(f,"click",function(n){n=sj_ev(n),l(sj_et(n),f)||u.searchBox.focus()},!0),n.appendChild(f),this.actionItems=[],this.suggestion=n,f.className.indexOf("sa_eco")!=-1&&f.firstChild&&!r&&(this.obd=!0))}function l(n,t){while(n){if(n==t)break;if(n.isPPElem)return!0;n=n.parentNode}return!1}function c(n){for(var t=n.firstChild;t&&t.nodeType!=1;)t=t.nextSibling;return t}function nt(n){var t=c(n),i;if(t&&t.attributes)return i=t.attributes.ec,i?i.value=="0":!1}function d(n,t){var r=c(t),u,i,e,o,f;if(r&&(u="getAttribute",i=r[u]("data"),n.eventId=r[u]("eventId"),i))for(i=i.split(";"),e=0;o=i[e++];)f=_ge(o),f&&y(f,n)}function y(n,t){n.p_ord=t.actionItems.length,n.panel=t,n.isPPElem=!0,f.RewriteAttribsToProps(n,["url","query","nt"]),typeof n.url=="string"&&(n.addInst=n.url.indexOf("/search")==0),v.attachSuggestionEvents(n),n.className+=" sa_ac",t.actionItems.push(n)}var e=sj_ce,k=sj_be,g=sj_sp,b=sb_st,o=sb_ct,t=Bing.AS.PreviewPaneManager.Events,f=Bing.AS.Utils,w=f.RemoveClassName,i,p,h,it=/(\s|^)sa_hv/g,tt=/(\s|^)sa_ppo/g,u,r=!1,v,s,n=a.prototype;return n.loaded=!1,n.visible=!1,n.Builders={},n.actionItems=[],n.show=function(){if(o(p),o(this.ct),!this.visible){if(t.raiseEvent(t.EventIds.PaneShown,this),this.visible=!0,this.ot=sb_gt(),r)return;var n=this.container,u=i.parentNode,f;u.className.match(h)||(u.className+=" sa_se",this.suggestion.className+=" sa_ppo"),n.style.display="block",n.offsetHeight>i.offsetHeight&&(i.style.height=n.offsetHeight+"px")}},n.hide=function(n){var u=this,c=u.container,f,e,s;u.visible&&(f=sj_wf(w,i.parentNode,h),e=function(){(o(u.ct),t.raiseEvent(t.EventIds.PaneHidden,u),u.visible=!1,w(u.suggestion,tt),r)||(c.style.display="none",i.style.height="auto")},n?(o(u.ct),e(),r||f()):(s=this.manager.getConfig().delayFix,u.ct=b(e,s),p=b(f,s)))},n.render=function(n){var i=this;n&&(i.container.innerHTML="",f.InsertAjaxResponseIntoDom(i.container,n,s.io)),i.timeout&&(i.timeout=!1),nt(i.container)&&(d(i,i.container),i.loaded=!0,t.raiseEvent(t.EventIds.PaneRendered,i))},n.renderError=function(){var u;if(t.raiseEvent(t.EventIds.ErrorRendered,this),!r){this.container.innerHTML="";var o=e("div","","pp_1col"),n=e("div",this.container.id+"_0","pp_tile pp_1row"),i=e("div","","pp_err");n.setAttribute("nav",";;;"+this.suggestion.id),f.SetInnerText(i,sa_loc.PE),u=e("span"),f.SetInnerText(u,' "'+this.suggestion.query+'"'),i.appendChild(u),n.appendChild(i),o.appendChild(n),n.query=this.suggestion.query,y(n,this),this.container.appendChild(o)}},a}(),function(){var n=null;Bing.AS.AutoSuggest.ScopeExtensions.push(new function(){this.init=function(){function u(n,t){var i="q:"+n;return t&&(i+=",i:"+t),i}function f(t,i){n&&n.clear(),r("Request",u(t,i),!0)}function e(n,t,i){r("Load",u(n,i),!1)}function o(i,f,e,o,s){var h=u(i,o),l,c;if(!o){for(l=[],c=0;c<f.length;c++)l.push(f[c].src);h+=",tl:"+l.join("|")}t.data&&t.data.Inst&&t.data.Inst.IG&&(h+=",ig:"+t.data.Inst.IG),Bing.AS.ImageLoadInstrumentation?(n||(n=new sa_ASImageLoadInstrumentation),n.setInstance(new Bing.AS.ImageLoadInstrumentation(s,function(n){r("Show",h+n,!0)}))):r("Show",h,!0)}function r(n,t,i){Log.Log(n,"AS","PerfInst",i,"Meta",t)}var t=this,i=new Bing.AS.EventRegistration;i.add(Bing.AS.EventIds.RequestSent,f),i.add(Bing.AS.EventIds.ValidResponseReceived,e),i.add(Bing.AS.EventIds.SuggestionsRendered,o),t.EventRegistry.push(i)}})}(),function(){var n=null;Bing.AS.AutoSuggest.ScopeExtensions.push(new function(){this.init=function(){function f(){var n=Bing.AS.PreviewPaneManager.Events,t=new Bing.AS.EventRegistration;t.add(n.EventIds.DlRequestSent,e),t.add(n.EventIds.DlResponseReceived,s),t.add(n.EventIds.DlResponseRendered,h),t.add(n.EventIds.DlRequestTimeout,o),n.add(t)}function r(n,t,i){var r="q:"+t;return i&&(r+=",i:"+i),r}function e(i,u,f){n&&n.clear(),t("Request",r(i,u,f),!0)}function o(n,i,u){t("Timeout",r(n,i,u),!0)}function s(n,i,u){t("Load",r(n,i,u),!1)}function h(u,f,e){var o=r(u,f,e);i.data&&i.data.Inst&&i.data.Inst.IG&&(o+=",ig:"+i.data.Inst.IG),u.eventId&&(o+=",eventId:"+u.eventId),Bing.AS.ImageLoadInstrumentation&&sa_ASImageLoadInstrumentation?(n||(n=new sa_ASImageLoadInstrumentation),n.setInstance(new Bing.AS.ImageLoadInstrumentation(u.container,function(n){t("Show",o+n,!0)}))):t("Show",o,!0)}function t(n,t,i){Log.Log(n,"AS_DL","PerfInst",i,"Meta",t)}var i=this,u=new Bing.AS.EventRegistration;u.add(Bing.AS.EventIds.Initialized,f),this.EventRegistry.push(u)}})}(),sa_inst=new Bing.AS.SearchForm(sa_config),sa_inst.init("sa_inst"),sa_eL&&sa_inst.show()